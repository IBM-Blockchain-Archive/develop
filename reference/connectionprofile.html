<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!doctype html>
<html lang="en">
<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
  
  
  

<head>
  <meta charset="utf-8">
  
    <title>Connection Profiles | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/develop/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  

  
    <link href="/develop/assets/css/normalize.css" rel="stylesheet">
    <link href="/develop/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/develop/assets/css/grid-layout.min.css" rel="stylesheet">
    <link href="/develop/assets/css/duo.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  

  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Just show the product name -->
            <p class="navbar-brand">IBM Blockchain Platform: <b>Develop</b></p>

</nav>

          </div>

          <select id="version" name="version" onchange="location = this.options[this.selectedIndex].value;">
              <option>Select version</option>
              <option value="/composer/latest/introduction/introduction.html" title="The most stable version of Composer">Latest</option>
              <option value="/composer/unstable/introduction/introduction.html" title="The version that will replace Latest">Latest-unstable</option>
          </select>

            <div class="search-form">
              <form action="/develop/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/develop/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Connection Profiles</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/develop/"><b>Introduction</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/develop/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/develop/installing/installing-index"><b>Installing</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/develop/installing/development-tools">Installing the development environment</a></li>
<li><a href="/develop/installing/update-dev-env">Updating the development environment</a></li>
<li><a href="/develop/installing/uninstall-dev-env">Uninstalling the development environment</a></li>
</ul></li>
<li><p><a href="/develop/tutorials/tutorials"><b>Tutorials</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/develop/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/develop/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/develop/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/develop/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/develop/tutorials/invoke-composer-network">Interacting with other business networks</a></li>
<li><a href="/develop/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
<li><a href="/develop/tutorials/google_oauth2_rest">Using Google OAUTH2.0 with a Composer REST server</a></li>
</ul></li>
<li><p><a href="/develop/playground/playground-index"><b>Using Playground</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/develop/business-network/business-network-index"><b>Developing Business Networks</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/develop/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/develop/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/develop/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/develop/business-network/testing">Testing Business Networks</a></li>
<li><a href="/develop/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/develop/business-network/upgrading-bna">Upgrading a deployed business network</a></li>
<li><a href="/develop/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/develop/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/develop/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/develop/business-network/cloud-wallets">Customising card stores</a></li>
</ul></li>
<li><p><a href="/develop/applications/applications-index"><b>Developing Applications</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/applications/node">Writing a Node.js application</a></li>
<li><a href="/develop/applications/web">Writing Web applications</a></li>
<li><a href="/develop/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/develop/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/develop/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/develop/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/develop/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/develop/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/develop/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/develop/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/develop/integrating/call-out">Calling external HTTP or REST services</a></li>
</ul></li>
<li><p><a href="/develop/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/develop/managing/participant-add">Adding participants</a></li>
<li><a href="/develop/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/develop/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/develop/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/develop/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/develop/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/develop/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/develop/problems/diagnostics"><b>Diagnosing Problems</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/develop/reference/reference-index"><b>Reference</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/develop/reference/cto_language">Modeling Language</a></li>
<li><a href="/develop/reference/acl_language">Access Control Language</a></li>
<li><a href="/develop/reference/query-language">Query Language</a></li>
<li><a href="/develop/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/develop/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/develop/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/develop/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/develop/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/develop/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/develop/support/support-index"><b>Support</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/develop/api/api-doc-index"><b>API Reference</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/api/allData">API Class Index</a></li>
<li><a href="/develop/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/develop/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/develop/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/develop/api/client-historian">Historian (Client API)</a></li>
<li><a href="/develop/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/develop/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/develop/api/client-query">Query (Client API)</a></li>
<li><a href="/develop/api/client-registry">Registry (Client API)</a></li>
<li><a href="/develop/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/develop/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/develop/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/develop/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/develop/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-concept">Concept (Common API)</a></li>
<li><a href="/develop/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-factory">Factory (Common API)</a></li>
<li><a href="/develop/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/develop/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/develop/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/develop/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/develop/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/develop/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-property">Property (Common API)</a></li>
<li><a href="/develop/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/develop/api/common-resource">Resource (Common API)</a></li>
<li><a href="/develop/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/develop/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/develop/api/common-typed">Typed (Common API)</a></li>
<li><a href="/develop/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/develop/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/develop/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/develop/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/develop/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/develop/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/develop/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/develop/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
<li><p><a href="/develop/systemns/systemns-index"><b>System Namespace Reference</b><img src="/develop/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/develop/systemns/01_summary">Summary</a></li>
<li><a href="/develop/systemns/02_assets">Assets</a></li>
<li><a href="/develop/systemns/03_participants">Participants</a></li>
<li><a href="/develop/systemns/04_transactions">Transactions</a></li>
<li><a href="/develop/systemns/05_events">Events</a></li>
<li><a href="/develop/systemns/06_enums">Enums</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>View the <a href="http://www14.software.ibm.com/cgi-bin/weblap/lap.pl?li_formnum=L-MCAE-ATLKDW&title=IBM%20Blockchain%20Platform:%20Develop">license information</a></p>
    </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="connection-profiles">Connection Profiles</h1>

<hr>

<p>A Connection Profile is used by IBM Blockchain Platform: Develop to connect to a runtime.</p>

<h2 id="creating-a-connection-profile-for-hyperledger-fabric">Creating a Connection Profile for Hyperledger Fabric</h2>

<p>Hyperledger Fabric defines the format of the connection profile. The following is an example of a single organization fabric network</p>
<div class="highlight"><pre><code class="language-" data-lang="">{
    "name": "hlfv1",
    "x-type": "hlfv1",
    "x-commitTimeout": 300,
    "version": "1.0.0",
    "client": {
        "organization": "Org1",
        "connection": {
            "timeout": {
                "peer": {
                    "endorser": "300",
                    "eventHub": "300",
                    "eventReg": "300"
                },
                "orderer": "300"
            }
        }
    },
    "channels": {
        "composerchannel": {
            "orderers": [
                "orderer.example.com"
            ],
            "peers": {
                "peer0.org1.example.com": {
                    "endorsingPeer": true,
                    "chaincodeQuery": true,
                    "ledgerQuery": true,
                    "eventSource": true
                }
            }
        }
    },
    "organizations": {
        "Org1": {
            "mspid": "Org1MSP",
            "peers": [
                "peer0.org1.example.com"
            ],
            "certificateAuthorities": [
                "ca.org1.example.com"
            ]
        }
    },
    "orderers": {
        "orderer.example.com": {
            "url": "grpc://orderer.example.com:7050"
        }
    },
    "peers": {
        "peer0.org1.example.com": {
            "url": "grpc://peer0.org1.example.com:7051",
            "eventUrl": "grpc://peer0.org1.example.com:7053"
        }
    },
    "certificateAuthorities": {
        "ca.org1.example.com": {
            "url": "http://ca.org1.example.com:7054",
            "caName": "ca.org1.example.com"
        }
    }
}
</code></pre></div>
<p>Official documentation for this structure can be found here:  <a href="https://fabric-sdk-node.github.io/tutorial-network-config.html">https://fabric-sdk-node.github.io/tutorial-network-config.html</a>.</p>

<p>The Hyperledger Fabric  connection profile is significantly different to the connection profiles used by previous versions of IBM Blockchain Platform: Develop. The Hyperledger Fabric  connection profile defines all the servers that exist, not only in your organization but all organizations as well as all defined channels.</p>

<p>The full capability of the connection profile is not given here and not all of it is supported but this will be discussed in the sections.</p>

<p>The following sections define the server details:</p>

<ul>
<li>Orderers</li>
<li>Peers</li>
<li>Certificate Authorities</li>
</ul>

<p>Organizational details are defined in:</p>

<ul>
<li>Organizations</li>
<li>Channels</li>
<li>Client section</li>
</ul>

<h3 id="general-information">General information</h3>
<div class="highlight"><pre><code class="language-" data-lang="">"name": "hlfv1",
"x-type": "hlfv1",
"x-commitTimeout": 300,
"version": "1.0.0",
</code></pre></div>
<ul>
<li><code>name</code> is a name used to refer to the connection profile, and is required.</li>
<li><code>x-type</code> defines the version of Hyperledger Fabric that you will connect to. To connect to Hyperledger Fabric , <code>x-type</code> must be <code>hlfv1</code>.</li>
<li><code>x-commitTimeout</code> defines the number of seconds to wait for a commit response to be received for a transaction.</li>
<li><code>version</code> defines the version of a connection profile and currently only a version of <code>1.0.0</code> is supported.</li>
</ul>

<h3 id="orderers">Orderers</h3>

<p>Here we define all the orderers that are part of the network. The name &quot;orderer.example.com&quot; is a label allowing us to reference this definition later.</p>
<div class="highlight"><pre><code class="language-" data-lang="">"orderers": {
    "orderer.example.com": {
        "url": "grpc://orderer.example.com:7050"
    }
},
</code></pre></div>
<p>This section defines all the available orderers, the example here provides a basic configuration for a non-tls orderer. To configure an orderer to use TLS, use the following format:</p>
<div class="highlight"><pre><code class="language-" data-lang="">"orderers": {
    "orderer.example.com": {
        "url": "grpcs://orderer.example.com:7050",
        "grpcOptions": {
            "ssl-target-name-override": "orderer.example.com"
        },
        "tlsCACerts": {
            "pem": "-----BEGIN CERTIFICATE----- &lt;etc&gt; "
        }
    }
},
</code></pre></div>
<p>In order to guarantee portability it is highly recommended to embed required certificate(s) into the connection profile using the <code>pem</code> option.</p>

<p>Certificates can also be defined using a file path, but this is not recommended.</p>

<h3 id="peers">Peers</h3>

<p>Here we define all the peers in all organizations in the network. Each has a unique label so it can be referenced later. In the example the label is <code>peer0.org1.example.com</code>.</p>
<div class="highlight"><pre><code class="language-" data-lang="">"peers": {
    "peer0.org1.example.com": {
        "url": "grpc://peer0.org1.example.com:7051",
        "eventUrl": "grpc://peer0.org1.example.com:7053"
    }
},
</code></pre></div>
<p>Peer definitions are similar to orderer definitions in structure, but you should define both the <code>url</code> and <code>eventUrl</code> of a peer. Older connection profile formats required that you only define the eventUrl for peers in your organization. Defining TLS for a peer is similar to orderers</p>
<div class="highlight"><pre><code class="language-" data-lang="">"peers": {
    "peer0.org1.example.com": {
        "url": "grpc://peer0.org1.example.com:7051",
        "eventUrl": "grpc://peer0.org1.example.com:7053"
        "grpcOptions": {
            "ssl-target-name-override": "peer.org1.example.com"
        },
        "tlsCACerts": {
            "pem": "-----BEGIN CERTIFICATE----- &lt;etc&gt; "
        }
    }
},
</code></pre></div>
<p>To define multiple peers, use the following format:</p>
<div class="highlight"><pre><code class="language-" data-lang="">"peers": {
    "peer0.org1.example.com": {
        "url": "grpc://peer0.org1.example.com:7051",
        "eventUrl": "grpc://peer0.org1.example.com:7053"
    },
    "peer1.org1.example.com": {
        "url": "grpc://peer1.org1.example.com:7051",
        "eventUrl": "grpc://peer1.org1.example.com:7053"
    },
    "peer0.org2.example.com": {
        "url": "grpc://peer0.org2.example.com:7051",
        "eventUrl": "grpc://peer0.org2.example.com:7053"
    },
},
</code></pre></div>
<h3 id="certificate-authorities">Certificate Authorities</h3>

<p>Here you define all the certificate authorities</p>
<div class="highlight"><pre><code class="language-" data-lang="">"certificateAuthorities": {
    "ca.org1.example.com": {
        "url": "http://ca.org1.example.com:7054",
        "caName": "ca.org1.example.com"
    }
}
</code></pre></div>
<ul>
<li><code>url</code> defines the url of a Hyperledger Fabric certificate authority to connect to. If your certificate authority requires a name, it must be defined in <code>caName</code>.</li>
<li><code>trustedRoots</code> and <code>verify</code> options for the Certificate Authority are described here <a href="https://fabric-sdk-node.github.io/global.html#TLSOptions">https://fabric-sdk-node.github.io/global.html#TLSOptions</a></li>
</ul>

<h3 id="organizations">Organizations</h3>

<p>Here you define the servers that are part of your organization as well as your MSPid and provide it with a name which can be referenced.
In the example our MSPid is <code>Org1MSP</code> and we have a single peer and a single certificate authority and label our organization <code>Org1</code>. Note the referencing of the peer and certificate authority.</p>
<div class="highlight"><pre><code class="language-" data-lang="">    "organizations": {
        "Org1": {
            "mspid": "Org1MSP",
            "peers": [
                "peer0.org1.example.com"
            ],
            "certificateAuthorities": [
                "ca.org1.example.com"
            ]
        }
    },
</code></pre></div>
<ul>
<li><code>mspid</code> is the Membership Service Provider ID of your organization. It is associated with the enrolment id that you will use to interact with the business network.</li>
</ul>

<h3 id="channels">Channels</h3>

<p>This defines the various Hyperledger Fabric peers and orderers that are participating on a specific channel as well as the role of the peers.
<strong>IMPORTANT</strong> IBM Blockchain Platform: Develop can only work with 1 channel, so you need to ensure that only a single channel is defined in this section even though the document can support multiple channel definitions.</p>
<div class="highlight"><pre><code class="language-" data-lang="">"channels": {
    "composerchannel": {
        "orderers": [
            "orderer.example.com"
        ],
        "peers": {
            "peer0.org1.example.com": {
                "endorsingPeer": true,
                "chaincodeQuery": true,
                "ledgerQuery": true,
                "eventSource": true
            }
        }
    }
},
</code></pre></div>
<p>A peer has 4 possible roles. If a role is not specified then it is assumed to be true.</p>

<ul>
<li><code>endorsingPeer</code> means that peer is there to endorse transactions and must have chaincode instantiated.</li>
<li><code>chaincodeQuery</code> means that peer is able to handle chaincode query requests and must have chaincode instantiated.</li>
<li><code>ledgerQuery</code> means that peer is able to perform a ledger query. This does not require chaincode to be instantiated on that peer.</li>
<li><code>eventSource</code> means that this peer will generate events.</li>
</ul>

<h3 id="client">Client</h3>

<p>This section will be unique for each organization and defines configuration information specific to your client application.</p>
<div class="highlight"><pre><code class="language-" data-lang="">"client": {
    "organization": "Org1",
    "connection": {
        "timeout": {
            "peer": {
                "endorser": "300",
                "eventHub": "300",
                "eventReg": "300"
            },
            "orderer": "300"
        }
    }
},
</code></pre></div>
<p>In this section you define the <code>organization</code> you belong to, in the example this is <code>Org1</code> which references the Org1 organization in the profile. You also define timeouts in seconds for each of the possible interactions.</p>

<h3 id="common-properties">Common properties</h3>

<p>When defining a peer or orderer there are some common options you can use. These are:</p>

<ul>
<li><code>grpcOptions</code></li>
<li><code>tlsCACerts</code></li>
</ul>

<p>For example a peer definition might look like:</p>
<div class="highlight"><pre><code class="language-" data-lang="">"peer0.org1.example.com": {
    "url": "grpcs://peer0.org1.example.com:7051",
    "eventUrl": "grpcs://peer0.org1.example.com:7053"
    "grpcOptions": {
        "ssl-target-name-override": "peer.org1.example.com",
        "grpc.keepalive_time_ms": 600000,
        "grpc.max_send_message_length": 15728640,
        "grpc.max_receive_message_length": 15728640
    },
    "tlsCACerts": {
        "pem": "-----BEGIN CERTIFICATE----- &lt;etc&gt; "
    }
}
</code></pre></div>
<p>The grpc message lengths are in bytes and the timeout is in milliseconds. the grpc options are not specific to the connection profile and are the same properties defined by grpc itself.</p>

<p>A similar thing could be done for an orderer definition:</p>
<div class="highlight"><pre><code class="language-" data-lang="">"orderer.example.com": {
    "url": "grpcs://orderer.example.com:7050",
    "grpcOptions": {
        "ssl-target-name-override": "orderer.example.com",
        "grpc.keepalive_time_ms": 600000,
        "grpc.max_send_message_length": 15728640,
        "grpc.max_receive_message_length": 15728640
    },
    "tlsCACerts": {
        "pem": "-----BEGIN CERTIFICATE----- &lt;etc&gt; "
    }
}
</code></pre></div>
<p>There are other <code>grpcOptions</code> available, please refer to the <a href="https://fabric-sdk-node.github.io/tutorial-network-config.html">https://fabric-sdk-node.github.io/tutorial-network-config.html</a> for more information</p>

<h3 id="hsm-support">HSM Support</h3>

<p>Support for HSM (Hardware Security Module)is now possible so long as you have PKCS#11 support for your HSM and the PKCS#11 module is configured as per the vendor documentation. To drive management of identities through a HSM you need to provide the connection profile with information about your HSM setup. This information needs to go into the client section, for example</p>
<div class="highlight"><pre><code class="language-" data-lang="">"client": {
    "organization": "Org1",
    "connection": {
        "timeout": {
            "peer": {
                "endorser": "300",
                "eventHub": "300",
                "eventReg": "300"
            },
            "orderer": "300"
        }
    },
    "x-hsm": {
        "library": "/usr/local/lib/myhsm.so",
        "slot": 0,
        "pin": 98765432
    }
},
</code></pre></div>
<ul>
<li><code>library</code> is the absolute path to the pkcs#11 library required for communication with your specific HSM</li>
<li><code>slot</code> is the configured slot number for the HSM</li>
<li><code>pin</code> is the pin defined for access to that slot.</li>
</ul>

<p>To be able to ensure connection profiles remain portable as well as not hard coding the slot and pin in the connection profile, each of the hsm properties can be referenced from an environment variable. For example if you define environment variables on your system called <code>PKCS_LIBRARY</code>, <code>PKCS_SLOT</code> and <code>PKCS_PIN</code> to hold the hsm information, for example</p>
<div class="highlight"><pre><code class="language-" data-lang="">export PKCS_LIBRARY=/usr/local/lib/myhsm.so
export PKCS_SLOT=0
export PKCS_PIN=98765432
</code></pre></div>
<p>then you can reference these in the connection profile as follows</p>
<div class="highlight"><pre><code class="language-" data-lang="">"x-hsm": {
    "library": "{PKCS_LIBRARY}",
    "slot": "{PKCS_SLOT}",
    "pin": "{PKCS_PIN}"
}
</code></pre></div>
            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/develop/assets/js/nav.js"></script>
<script src="/develop/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
